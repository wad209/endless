version: '3'
services:
    postgis:
        image: "postgis/postgis:12-3.0-alpine"
        env_file:
            - database.env
        volumes:
            - pgdata:/var/lib/postgresql/data
            - ./init.sql:/docker-entrypoint-initdb.d/init.sql                     
    renderer:
        build: ../renderer
        env_file:
            - database.env
        ports:
            - "192.168.1.47:80:80"
        depends_on:
            - postgis

    import:
        build: ../osm2pgsql
        env_file:
            - database.env
        depends_on:
            - postgis
volumes:
    pgdata: {}
